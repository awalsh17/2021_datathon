---
title: "Some initial exploration"
author: "Alice"
date: "3/16/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, results = "asis")
```

```{r libraries, echo=FALSE, message=FALSE, warning=FALSE}
library(gtsummary)
library(readr)
library(ggplot2)
library(dplyr)
```


# Summary
Read in the datasets from 'data_links.md' and summarize the data with the `gtsummary` package.

I used the data I had already manipulated and saved locally in the 'aw_process_data.R' script.

```{r message=FALSE}
merged <- readRDS('~/Documents/merged_jat.Rds')
```


How many dockets with some bail entry had no bail amount > 0 ? (Could be ROR or nonmonetary)

```{r}
merged %>% 
  filter(max_bail_amount == 0) %>% 
  count(max_grade, sort=T) %>% 
  pander::pander()
```

What about bail == 0 by representation type?
```{r}
merged %>% 
  mutate(zero_bail = ifelse(max_bail_amount == 0, T, F)) %>% 
  count(representation_type, zero_bail, sort=T) %>% 
  pander::pander()
```

The minimum bail per docket ranges from 1 dollar to 100,100,000 dollars

```{r}
merged %>% 
  filter(min_bail_amount>0) %>% 
ggplot( aes(x=max_grade, y= min_bail_amount))+
  geom_boxplot(outlier.shape = NA) +
  geom_jitter(height=0, width=0.15, alpha=0.5) +
  scale_y_log10() +
  labs(title = "Min bail amount when >$0",
       subtitle = "All years") + 
  theme_bw()

```

We could imagine a dashboard to select certain years or grades. For example, here we select dockets with "S" grade as the max grade and plot by year (filing date).
```{r}
merged %>% 
  filter(min_bail_amount>0, max_grade == "S") %>% 
  mutate(year = lubridate::year(filing_date)) %>% 
ggplot( aes(x=year, group = year, y= min_bail_amount))+
  geom_boxplot(outlier.shape = NA) +
  geom_jitter(height=0, width=0.15, alpha=0.5) +
  scale_y_log10() +
  labs(title = "Min bail amount when >$0",
       subtitle = "Max grade of S") + 
  theme_bw()

```

```{r}
sessionInfo()
```

